<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bbs.demo.mapper.PostMapper">

	<!-- 전체 게시글 조회 -->
	<select id="getAllPosts" resultType="com.bbs.demo.model.Post">
		SELECT
			posts_id, file, content, region, views,
			created_at, updated_at, Users_id, is_notice
		FROM Posts
		ORDER BY created_at DESC
	</select>
	
	<!-- 특정 게시글 조회 -->
	<select id="getPostById" parameterType="int" resultType="com.bbs.demo.model.Post">
		SELECT
			posts_id, file, content, region, views,
			created_at, updated_at, Users_id, is_notice
		FROM Posts
		WHERE posts_id = #{posts_id}
	</select>
	
	<!-- 게시글 등록 -->
	<insert id="insertPost" parameterType="com.bbs.demo.model.Post">
		INSERT INTO Posts(
			file, content, region, views,
			created_at, updated_at, Users_id, is_notice
		)
		VALUES(
			#{file}, #{content}, #{region}, #{views},
			#{created_at}, #{updated_at}, #{Users_id}, #{is_notice}
		)
	</insert>
	
	<!-- 게시글 수정 -->
	<update id="updatePost" parameterType="com.bbs.demo.model.Post">
		UPDATE Posts SET
			file = #{file},
			content = #{content},
			region = #{region},
			views = #{views},
			updated_at = #{updated_at},
			Users_id = #{Users_id},
			is_notice = #{is_notice}
		WHERE posts_id = #{posts_id}
	</update>
	
	<!-- 게시글 삭제 -->
	<delete id="deletePost" parameterType="int">
		DELETE FROM Posts WHERE posts_id = #{posts_id}
	</delete>
	
	<!-- 참고 사항!
	is_notice는 DB에서 tinyint(1)로 처리될 수 있으니, boolean <-> int 변환이 잘 되는지 확인 필요
	만약 views, like, comment 같은 필드도 추후 추가 하고 싶다면, model과 mapper.xml 양쪽에 같이 추가하면 된다.
	 -->


</mapper>    